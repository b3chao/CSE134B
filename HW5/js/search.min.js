var config={apiKey:"AIzaSyBSqnmEYkvUCT084y_NPpJeL9-TofpOsq4",authDomain:"cse134b-all.firebaseapp.com",databaseURL:"https://cse134b-all.firebaseio.com",storageBucket:"",messagingSenderId:"295582276921"},logout=function(){firebase.auth().signOut().then(function(){window.location="./login.html"},function(a){})},apiOptions={app_id:"2d286989",app_key:"e5d5149395fe93594da1147d9cac7e6e",from:0,to:25};firebase.initializeApp(config);var database=firebase.database(),ref=database.ref(),vm=new Vue({el:"#vue-app",data:{all_results:null,results:null,searchInput:null,pages:null},methods:{searchMeals:function(){apiOptions.q=this.searchInput,$.post("https://api.edamam.com/search",apiOptions,function(a,b){if(0!=a.hits.length){var c=[];for(var d in a.hits){var e={},f=a.hits[d].recipe;e.label=f.label,e.img=f.image,e.calories=parseInt(f.calories),e.ingredients=f.ingredientLines.join(", "),e.ingredient_array=f.ingredientLines,e.url=f.url,e.modal_target="#modal_"+d,e.modal_id="modal_"+d;var g=f.uri.indexOf("#")+1;e.food_id=f.uri.slice(g),c.push(e)}vm.pages=Math.ceil(c.length/5),vm.all_results=c,vm.results=c.slice(0,5)}else document.getElementById("ret_message").innerHTML="No Result Found"})},addMeal:function(a,b){var c=firebase.auth().currentUser;if(c){var d=this.results[a],e=ref.child(c.uid);e.once("value",function(a){var b=a.val();b||(b={},b.favorites||(b.favorites=[])),b.favorites.push(d),e.set(b),document.getElementById("ret_message").innerHTML="Added "+d.label+" to favorites"})}},switchPage:function(a,b){console.log("switching pages");var c=5*a,d=c-5;vm.results=vm.all_results.slice(d,c)}}});
